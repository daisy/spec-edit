<!DOCTYPE html><html xmlns="http://www.w3.org/1999/xhtml" lang="en-US" xml:lang="en-US"><head>
<meta charset="utf-8">
<meta name="generator" content="ReSpec 34.1.8">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<style>
span.example-title{text-transform:none}
:is(aside,div).example,div.illegal-example{padding:.5em;margin:1em 0;position:relative;clear:both}
div.illegal-example{color:red}
div.illegal-example p{color:#000}
:is(aside,div).example{border-left-width:.5em;border-left-style:solid;border-color:#e0cb52;background:#fcfaee}
aside.example div.example{border-left-width:.1em;border-color:#999;background:#fff}
.example pre{background-color:rgba(0,0,0,.03)}
</style>
<style>
.issue-label{text-transform:initial}
.warning>p:first-child{margin-top:0}
.warning{padding:.5em;border-left-width:.5em;border-left-style:solid}
span.warning{padding:.1em .5em .15em}
.issue.closed span.issue-number{text-decoration:line-through}
.issue.closed span.issue-number::after{content:" (Closed)";font-size:smaller}
.warning{border-color:#f11;border-width:.2em;border-style:solid;background:#fbe9e9}
.warning-title:before{content:"⚠";font-size:1.3em;float:left;padding-right:.3em;margin-top:-.3em}
li.task-list-item{list-style:none}
input.task-list-item-checkbox{margin:0 .35em .25em -1.6em;vertical-align:middle}
.issue a.respec-gh-label{padding:5px;margin:0 2px 0 2px;font-size:10px;text-transform:none;text-decoration:none;font-weight:700;border-radius:4px;position:relative;bottom:2px;border:none;display:inline-block}
</style>
<style>
dfn{cursor:pointer}
.dfn-panel{position:absolute;z-index:35;min-width:300px;max-width:500px;padding:.5em .75em;margin-top:.6em;font-family:"Helvetica Neue",sans-serif;font-size:small;background:#fff;color:#000;box-shadow:0 1em 3em -.4em rgba(0,0,0,.3),0 0 1px 1px rgba(0,0,0,.05);border-radius:2px}
.dfn-panel:not(.docked)>.caret{position:absolute;top:-9px}
.dfn-panel:not(.docked)>.caret::after,.dfn-panel:not(.docked)>.caret::before{content:"";position:absolute;border:10px solid transparent;border-top:0;border-bottom:10px solid #fff;top:0}
.dfn-panel:not(.docked)>.caret::before{border-bottom:9px solid #a2a9b1}
.dfn-panel *{margin:0}
.dfn-panel b{display:block;color:#000;margin-top:.25em}
.dfn-panel ul a[href]{color:#333}
.dfn-panel>div{display:flex}
.dfn-panel a.self-link{font-weight:700;margin-right:auto}
.dfn-panel .marker{padding:.1em;margin-left:.5em;border-radius:.2em;text-align:center;white-space:nowrap;font-size:90%;color:#040b1c}
.dfn-panel .marker.dfn-exported{background:#d1edfd;box-shadow:0 0 0 .125em #1ca5f940}
.dfn-panel .marker.idl-block{background:#8ccbf2;box-shadow:0 0 0 .125em #0670b161}
.dfn-panel a:not(:hover){text-decoration:none!important;border-bottom:none!important}
.dfn-panel a[href]:hover{border-bottom-width:1px}
.dfn-panel ul{padding:0}
.dfn-panel li{margin-left:1em}
.dfn-panel.docked{position:fixed;left:.5em;top:unset;bottom:2em;margin:0 auto;max-width:calc(100vw - .75em * 2 - .5em - .2em * 2);max-height:30vh;overflow:auto}
</style>
		
		
<title>DAISY Specification Editing Guide</title>
		
<style id="respec-mainstyle">
@keyframes pop{
0%{transform:scale(1,1)}
25%{transform:scale(1.25,1.25);opacity:.75}
100%{transform:scale(1,1)}
}
:is(h1,h2,h3,h4,h5,h6,a) abbr{border:none}
dfn{font-weight:700}
a.internalDFN{color:inherit;border-bottom:1px solid #99c;text-decoration:none}
a.externalDFN{color:inherit;border-bottom:1px dotted #ccc;text-decoration:none}
a.bibref{text-decoration:none}
.respec-offending-element:target{animation:pop .25s ease-in-out 0s 1}
.respec-offending-element,a[href].respec-offending-element{text-decoration:red wavy underline}
@supports not (text-decoration:red wavy underline){
.respec-offending-element:not(pre){display:inline-block}
.respec-offending-element{background:url(data:image/gif;base64,R0lGODdhBAADAPEAANv///8AAP///wAAACwAAAAABAADAEACBZQjmIAFADs=) bottom repeat-x}
}
#references :target{background:#eaf3ff;animation:pop .4s ease-in-out 0s 1}
cite .bibref{font-style:normal}
a[href].orcid{padding-left:4px;padding-right:4px}
a[href].orcid>svg{margin-bottom:-2px}
.toc a,.tof a{text-decoration:none}
a .figno,a .secno{color:#000}
ol.tof,ul.tof{list-style:none outside none}
.caption{margin-top:.5em;font-style:italic}
table.simple{border-spacing:0;border-collapse:collapse;border-bottom:3px solid #005a9c}
.simple th{background:#005a9c;color:#fff;padding:3px 5px;text-align:left}
.simple th a{color:#fff;padding:3px 5px;text-align:left}
.simple th[scope=row]{background:inherit;color:inherit;border-top:1px solid #ddd}
.simple td{padding:3px 10px;border-top:1px solid #ddd}
.simple tr:nth-child(even){background:#f0f6ff}
.section dd>p:first-child{margin-top:0}
.section dd>p:last-child{margin-bottom:0}
.section dd{margin-bottom:1em}
.section dl.attrs dd,.section dl.eldef dd{margin-bottom:0}
#issue-summary>ul{column-count:2}
#issue-summary li{list-style:none;display:inline-block}
details.respec-tests-details{margin-left:1em;display:inline-block;vertical-align:top}
details.respec-tests-details>*{padding-right:2em}
details.respec-tests-details[open]{z-index:999999;position:absolute;border:thin solid #cad3e2;border-radius:.3em;background-color:#fff;padding-bottom:.5em}
details.respec-tests-details[open]>summary{border-bottom:thin solid #cad3e2;padding-left:1em;margin-bottom:1em;line-height:2em}
details.respec-tests-details>ul{width:100%;margin-top:-.3em}
details.respec-tests-details>li{padding-left:1em}
.self-link:hover{opacity:1;text-decoration:none;background-color:transparent}
aside.example .marker>a.self-link{color:inherit}
.header-wrapper{display:flex;align-items:baseline}
:is(h2,h3,h4,h5,h6):not(#toc>h2,#abstract>h2,#sotd>h2,.head>h2){position:relative;left:-.5em}
:is(h2,h3,h4,h5,h6):not(#toch2)+a.self-link{color:inherit;order:-1;position:relative;left:-1.1em;font-size:1rem;opacity:.5}
:is(h2,h3,h4,h5,h6)+a.self-link::before{content:"§";text-decoration:none;color:var(--heading-text)}
:is(h2,h3)+a.self-link{top:-.2em}
:is(h4,h5,h6)+a.self-link::before{color:#000}
@media (max-width:767px){
dd{margin-left:0}
}
@media print{
.removeOnSave{display:none}
}
</style>
		
		
	
<style>
.hljs{display:block;overflow-x:auto;padding:.5em;color:#383a42;background:#fafafa}
.hljs-comment,.hljs-quote{color:#717277;font-style:italic}
.hljs-doctag,.hljs-formula,.hljs-keyword{color:#a626a4}
.hljs-deletion,.hljs-name,.hljs-section,.hljs-selector-tag,.hljs-subst{color:#ca4706;font-weight:700}
.hljs-literal{color:#0b76c5}
.hljs-addition,.hljs-attribute,.hljs-meta-string,.hljs-regexp,.hljs-string{color:#42803c}
.hljs-built_in,.hljs-class .hljs-title{color:#9a6a01}
.hljs-attr,.hljs-number,.hljs-selector-attr,.hljs-selector-class,.hljs-selector-pseudo,.hljs-template-variable,.hljs-type,.hljs-variable{color:#986801}
.hljs-bullet,.hljs-link,.hljs-meta,.hljs-selector-id,.hljs-symbol,.hljs-title{color:#336ae3}
.hljs-emphasis{font-style:italic}
.hljs-strong{font-weight:700}
.hljs-link{text-decoration:underline}
</style>
<style>
var{position:relative;cursor:pointer}
var[data-type]::after,var[data-type]::before{position:absolute;left:50%;top:-6px;opacity:0;transition:opacity .4s;pointer-events:none}
var[data-type]::before{content:"";transform:translateX(-50%);border-width:4px 6px 0 6px;border-style:solid;border-color:transparent;border-top-color:#000}
var[data-type]::after{content:attr(data-type);transform:translateX(-50%) translateY(-100%);background:#000;text-align:center;font-family:"Dank Mono","Fira Code",monospace;font-style:normal;padding:6px;border-radius:3px;color:#daca88;text-indent:0;font-weight:400}
var[data-type]:hover::after,var[data-type]:hover::before{opacity:1}
</style>
<script id="initialUserConfig" type="application/json">{
  "shortName": "spec-edit",
  "specStatus": "base",
  "latestVersion": "https://daisy.github.io/spec-edit/guide/",
  "edDraftURI": "https://daisy.github.io/spec-edit/",
  "editors": [
    {
      "name": "Matt Garrish",
      "company": "DAISY Consortium",
      "url": "https://daisy.org/"
    }
  ],
  "logos": [
    {
      "src": "images/daisy_high.jpg",
      "width": 112,
      "height": 100,
      "alt": "DAISY Consortium logo",
      "url": "https://daisy.org"
    }
  ],
  "github": "daisy/spec-edit",
  "postProcess": [
    null
  ],
  "publishISODate": "2023-09-18T00:00:00.000Z",
  "generatedSubtitle": "18 September 2023"
}</script>
<link rel="stylesheet" href="https://www.w3.org/StyleSheets/TR/2021/base.css"></head>
	<body class="h-entry informative"><div class="head">
    <p class="logos"><a class="logo" href="https://daisy.org"><img crossorigin="" alt="DAISY Consortium logo" height="100" src="images/daisy_high.jpg" width="112">
  </a></p>
    <h1 id="title" class="title">DAISY Specification Editing Guide</h1> 
    <p id="w3c-state"> <time class="dt-published" datetime="2023-09-18">18 September 2023</time></p>
    <details open="">
      <summary>More details about this document</summary>
      <dl>
        
        <dt>Latest published version:</dt><dd>
                <a href="https://daisy.github.io/spec-edit/guide/">https://daisy.github.io/spec-edit/guide/</a>
              </dd>
        <dt>Latest editor's draft:</dt><dd><a href="https://daisy.github.io/spec-edit/">https://daisy.github.io/spec-edit/</a></dd>
        <dt>History:</dt><dd>
                    <a href="https://github.com/daisy/spec-edit/commits/">Commit history</a>
                  </dd>
        
        
        
        
        
        <dt>Editor:</dt><dd class="editor p-author h-card vcard">
    <a class="u-url url p-name fn" href="https://daisy.org/">Matt Garrish</a> (<span class="p-org org h-org">DAISY Consortium</span>)
  </dd>
        
        
        <dt>Feedback:</dt><dd>
        <a href="https://github.com/daisy/spec-edit/">GitHub daisy/spec-edit</a>
        (<a href="https://github.com/daisy/spec-edit/pulls/">pull requests</a>,
        <a href="https://github.com/daisy/spec-edit/issues/new/choose">new issue</a>,
        <a href="https://github.com/daisy/spec-edit/issues/">open issues</a>)
      </dd>
        
        
      </dl>
    </details>
    
    
    <p class="copyright">Copyright © DAISY Consortium 2023</p>
    <hr title="Separator for header">
  </div>
		
		<nav id="toc"><h2 class="introductory" id="table-of-contents">Table of Contents</h2><ol class="toc"><li class="tocline"><a class="tocxref" href="#intro"><bdi class="secno">1. </bdi>Introduction</a></li><li class="tocline"><a class="tocxref" href="#respec"><bdi class="secno">2. </bdi>ReSpec</a><ol class="toc"><li class="tocline"><a class="tocxref" href="#respec-intro"><bdi class="secno">2.1 </bdi>Introduction</a></li><li class="tocline"><a class="tocxref" href="#respec-config"><bdi class="secno">2.2 </bdi>Configuring a specification</a><ol class="toc"><li class="tocline"><a class="tocxref" href="#respec-add"><bdi class="secno">2.2.1 </bdi>Adding the code</a></li><li class="tocline"><a class="tocxref" href="#respec-metadata"><bdi class="secno">2.2.2 </bdi>Adding the initialization metadata</a></li><li class="tocline"><a class="tocxref" href="#respec-confirm"><bdi class="secno">2.2.3 </bdi>Confirming the ReSpec setup</a></li></ol></li><li class="tocline"><a class="tocxref" href="#respec-err-warn"><bdi class="secno">2.3 </bdi>Errors and warnings</a></li></ol></li><li class="tocline"><a class="tocxref" href="#editing"><bdi class="secno">3. </bdi>Editing</a><ol class="toc"><li class="tocline"><a class="tocxref" href="#spec-structure"><bdi class="secno">3.1 </bdi>Sectioning specifications</a><ol class="toc"><li class="tocline"><a class="tocxref" href="#sections"><bdi class="secno">3.1.1 </bdi>Using sections</a></li><li class="tocline"><a class="tocxref" href="#normative-sections"><bdi class="secno">3.1.2 </bdi>Normative sections</a><ol class="toc"><li class="tocline"><a class="tocxref" href="#normative-statements"><bdi class="secno">3.1.2.1 </bdi>Normative statements</a></li></ol></li><li class="tocline"><a class="tocxref" href="#informative-sections"><bdi class="secno">3.1.3 </bdi>Informative sections</a></li></ol></li><li class="tocline"><a class="tocxref" href="#prelim"><bdi class="secno">3.2 </bdi>Preliminary matter</a><ol class="toc"><li class="tocline"><a class="tocxref" href="#title-and-subtitle"><bdi class="secno">3.2.1 </bdi>Title and subtitle</a></li><li class="tocline"><a class="tocxref" href="#copyright"><bdi class="secno">3.2.2 </bdi>Copyright</a></li><li class="tocline"><a class="tocxref" href="#spec-abstract"><bdi class="secno">3.2.3 </bdi>Abstract</a></li><li class="tocline"><a class="tocxref" href="#spec-sotd"><bdi class="secno">3.2.4 </bdi>Status of this document</a></li><li class="tocline"><a class="tocxref" href="#spec-toc"><bdi class="secno">3.2.5 </bdi>Table of contents</a></li><li class="tocline"><a class="tocxref" href="#introductions"><bdi class="secno">3.2.6 </bdi>Introductions</a><ol class="toc"><li class="tocline"><a class="tocxref" href="#spec-overview"><bdi class="secno">3.2.6.1 </bdi>Overviews and Backgrounds</a></li><li class="tocline"><a class="tocxref" href="#spec-conformance"><bdi class="secno">3.2.6.2 </bdi>Conformance</a></li><li class="tocline"><a class="tocxref" href="#spec-terminology"><bdi class="secno">3.2.6.3 </bdi>Terminology</a></li></ol></li></ol></li><li class="tocline"><a class="tocxref" href="#body"><bdi class="secno">3.3 </bdi>Body matter</a><ol class="toc"><li class="tocline"><a class="tocxref" href="#body-write"><bdi class="secno">3.3.1 </bdi>How to write the body</a></li><li class="tocline"><a class="tocxref" href="#writing-guidelines"><bdi class="secno">3.3.2 </bdi>Writing guidelines</a></li><li class="tocline"><a class="tocxref" href="#xrefs"><bdi class="secno">3.3.3 </bdi>Cross-references</a></li><li class="tocline"><a class="tocxref" href="#ref-hd"><bdi class="secno">3.3.4 </bdi>References</a><ol class="toc"><li class="tocline"><a class="tocxref" href="#ref-specs-hd"><bdi class="secno">3.3.4.1 </bdi>To other specifications</a></li><li class="tocline"><a class="tocxref" href="#ref-markup-hd"><bdi class="secno">3.3.4.2 </bdi>To elements and attributes</a></li><li class="tocline"><a class="tocxref" href="#ref-concept-hd"><bdi class="secno">3.3.4.3 </bdi>To concepts and definitions</a></li></ol></li><li class="tocline"><a class="tocxref" href="#adding-notes"><bdi class="secno">3.3.5 </bdi>Adding notes</a></li><li class="tocline"><a class="tocxref" href="#adding-examples"><bdi class="secno">3.3.6 </bdi>Adding examples</a></li></ol></li><li class="tocline"><a class="tocxref" href="#backmatter"><bdi class="secno">3.4 </bdi>Back matter</a><ol class="toc"><li class="tocline"><a class="tocxref" href="#adding-app"><bdi class="secno">3.4.1 </bdi>Adding appendixes</a></li><li class="tocline"><a class="tocxref" href="#spec-change-log"><bdi class="secno">3.4.2 </bdi>Change log entries</a></li></ol></li><li class="tocline"><a class="tocxref" href="#custom-css"><bdi class="secno">3.5 </bdi>Custom styling</a></li></ol></li><li class="tocline"><a class="tocxref" href="#github"><bdi class="secno">4. </bdi>GitHub repositories</a><ol class="toc"><li class="tocline"><a class="tocxref" href="#github-tools"><bdi class="secno">4.1 </bdi>Tools</a></li><li class="tocline"><a class="tocxref" href="#repos-manage"><bdi class="secno">4.2 </bdi>Managing repositories</a><ol class="toc"><li class="tocline"><a class="tocxref" href="#clone-v-fork"><bdi class="secno">4.2.1 </bdi>Cloning v. forking repositories</a></li><li class="tocline"><a class="tocxref" href="#repo-checkout"><bdi class="secno">4.2.2 </bdi>Checking out a repository</a></li></ol></li><li class="tocline"><a class="tocxref" href="#pull-requests"><bdi class="secno">4.3 </bdi>Pull requests</a><ol class="toc"><li class="tocline"><a class="tocxref" href="#open-pr"><bdi class="secno">4.3.1 </bdi>Opening a pull request</a></li><li class="tocline"><a class="tocxref" href="#request-reviews"><bdi class="secno">4.3.2 </bdi>Request reviews</a></li><li class="tocline"><a class="tocxref" href="#review-pr"><bdi class="secno">4.3.3 </bdi>Reviewing pull requests</a></li><li class="tocline"><a class="tocxref" href="#edit-pr"><bdi class="secno">4.3.4 </bdi>Editing a pull request</a></li><li class="tocline"><a class="tocxref" href="#pr-on-pr"><bdi class="secno">4.3.5 </bdi>Pull requests on pull requests</a></li></ol></li><li class="tocline"><a class="tocxref" href="#branches"><bdi class="secno">4.4 </bdi>Branches</a><ol class="toc"><li class="tocline"><a class="tocxref" href="#branch-create"><bdi class="secno">4.4.1 </bdi>Create a branch</a></li><li class="tocline"><a class="tocxref" href="#branch-switch"><bdi class="secno">4.4.2 </bdi>Switching branches</a></li><li class="tocline"><a class="tocxref" href="#branch-delete"><bdi class="secno">4.4.3 </bdi>Deleting branches</a></li></ol></li><li class="tocline"><a class="tocxref" href="#repo-changes"><bdi class="secno">4.5 </bdi>Managing changes</a><ol class="toc"><li class="tocline"><a class="tocxref" href="#pull-updates"><bdi class="secno">4.5.1 </bdi>Pulling the latest updates</a></li><li class="tocline"><a class="tocxref" href="#commits"><bdi class="secno">4.5.2 </bdi>Committing changes</a></li><li class="tocline"><a class="tocxref" href="#file-maintenance"><bdi class="secno">4.5.3 </bdi>File maintenance</a></li><li class="tocline"><a class="tocxref" href="#push-changes"><bdi class="secno">4.5.4 </bdi>Pushing changes</a></li><li class="tocline"><a class="tocxref" href="#stash-changes"><bdi class="secno">4.5.5 </bdi>Stashing changes</a></li></ol></li></ol></li><li class="tocline"><a class="tocxref" href="#resources"><bdi class="secno">5. </bdi>Helpful resources</a><ol class="toc"><li class="tocline"><a class="tocxref" href="#github-0"><bdi class="secno">5.1 </bdi>GitHub</a></li><li class="tocline"><a class="tocxref" href="#editing-0"><bdi class="secno">5.2 </bdi>Editing</a></li></ol></li><li class="tocline"><a class="tocxref" href="#references"><bdi class="secno">A. </bdi>References</a><ol class="toc"><li class="tocline"><a class="tocxref" href="#informative-references"><bdi class="secno">A.1 </bdi>Informative references</a></li></ol></li></ol></nav>
		<section id="intro"><div class="header-wrapper"><h2 id="x1-introduction"><bdi class="secno">1. </bdi>Introduction</h2><a class="self-link" href="#intro" aria-label="Permalink for Section 1."></a></div>
			

			<p>Finding people to write technical specifications is challenge enough, and the last anything wants when
				taking on this kind of task is to be overwhelmed by the process of managing the documents. To help make
				the process as smooth as possible, DAISY uses two widely implemented tools to help authors and editors
				navigate the ins and outs of specification work: ReSpec and GitHub.</p>

			<p>ReSpec is a tool that lets authors and editors focus on writing the text — it takes care of
				formatting the document. Consequently, the only thing you have to know to write DAISY specifications is
				some basic HTML. This guide introduces ReSpec and explains its authoring conventions.</p>

			<p>GitHub is a content management system (CMS). Although commonly associated with coding projects, CMSes
				provide a convenient way to author documents. The full authoring history of documents is always
				available, for example, so you never have to worry about making mistakes. They are easily undone. GitHub
				also allows others to review your changes before they are merged into a document.</p>

			<p>Using GitHub can be a little more challenging than using ReSpec, but there are many user tools available
				that can hide the technical details. This guide focuses on the underlying commands to help you
				understand what happens at each stage of the process but is expected that you will use one of the
				available tools to simplify the process.</p>
		</section>
		<section id="respec"><div class="header-wrapper"><h2 id="x2-respec"><bdi class="secno">2. </bdi>ReSpec</h2><a class="self-link" href="#respec" aria-label="Permalink for Section 2."></a></div>
			

			<section id="respec-intro"><div class="header-wrapper"><h3 id="x2-1-introduction"><bdi class="secno">2.1 </bdi>Introduction</h3><a class="self-link" href="#respec-intro" aria-label="Permalink for Section 2.1"></a></div>
				

				<p>ReSpec is a JavaScript tool developed by the W3C to make editing their specifications easier and more
					consistent. The code allows you to focus on writing the content of the specification, while it takes
					care of adding common boilerplate and formatting when the document is viewed live.</p>

				<p>Although developed for W3C, ReSpec is no longer exclusively for developing W3C specifications. DAISY,
					for example, customizes a "base" profile to format its specifications and notes.</p>

				<p>The functioning of ReSpec is meant to be largely transparent to anyone editing specifications. Using
					the tool only requires a script tag to call in the ReSpec code and a block of JSON metadata to
					initialize it. Once these are set, editors will primarily be working in HTML to author the content.
					This means you can use whatever HTML editor you are most comfortable with.</p>

				<p>This section covers the setup and initialization of ReSpec. Information on how to tag HTML documents
					to take advantage of ReSpec's built-in formatting is covered in the next section on <a href="#editing">editing</a>.</p>

				<div class="note" role="note" id="issue-container-generatedID"><div role="heading" class="note-title marker" id="h-note" aria-level="4"><span>Note</span></div><div class="">
					<p>For detailed information on all aspects of ReSpec, please visit the <a href="https://respec.org/docs/">ReSpec Documentation</a>.</p>
				</div></div>
			</section>

			<section id="respec-config"><div class="header-wrapper"><h3 id="x2-2-configuring-a-specification"><bdi class="secno">2.2 </bdi>Configuring a specification</h3><a class="self-link" href="#respec-config" aria-label="Permalink for Section 2.2"></a></div>
				

				<div class="note" role="note" id="issue-container-generatedID-0"><div role="heading" class="note-title marker" id="h-note-0" aria-level="4"><span>Note</span></div><div class="">
					<p>Configuring a ReSpec document for the first time is typically done by DAISY staff. You can skip
						this subsection if you are not interested in how the code is set up.</p>
				</div></div>

				<section id="respec-add"><div class="header-wrapper"><h4 id="x2-2-1-adding-the-code"><bdi class="secno">2.2.1 </bdi>Adding the code</h4><a class="self-link" href="#respec-add" aria-label="Permalink for Section 2.2.1"></a></div>
					

					<p>The ReSpec source code is hosted at <code>https://www.w3.org/Tools/respec/respec-w3c</code></p>

					<p>To call in this code, you only need to add a <code>script</code> tag to the HTML header.</p>

					<aside title="ReSpec script tag">
						<pre><code aria-busy="false" class="hljs xml"><span class="hljs-tag">&lt;<span class="hljs-name">html</span> …&gt;</span>
   <span class="hljs-tag">&lt;<span class="hljs-name">head</span>&gt;</span>
      …
      <span class="hljs-tag">&lt;<span class="hljs-name">script</span>
         <span class="hljs-attr">src</span>=<span class="hljs-string">"https://www.w3.org/Tools/respec/respec-w3c"</span>
         <span class="hljs-attr">class</span>=<span class="hljs-string">"remove"</span>&gt;</span>
      <span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span>
      …
   <span class="hljs-tag">&lt;/<span class="hljs-name">head</span>&gt;</span>
   …
<span class="hljs-tag">&lt;/<span class="hljs-name">html</span>&gt;</span></code></pre>
					</aside>

					<p>Note the use of the <code>class</code> attribute value "<code>remove</code>" on the
							<code>script</code> tag. This class ensures that ReSpec will remove the <code>script</code>
						tag (i.e., itself) when exporting a static version of the specification for publication.</p>

					<p>The only other requirement to get ReSpec working is to add the <a href="#respec-metadata">initialization metadata</a>.</p>
				</section>

				<section id="respec-metadata"><div class="header-wrapper"><h4 id="x2-2-2-adding-the-initialization-metadata"><bdi class="secno">2.2.2 </bdi>Adding the initialization metadata</h4><a class="self-link" href="#respec-metadata" aria-label="Permalink for Section 2.2.2"></a></div>
					

					<p>ReSpec uses JSON metadata to initialize. This metadata is normally embedded in the
							<code>head</code> of the HTML document using a <code>script</code> tag. Although it is
						possible to import the metadata, doing so is not recommended. When stored outside the
						specification, the metadata is often forgotten and not updated.</p>

					<p>The <code>script</code> tag must contain a <code>respecConfig</code> variable definition, which
						in turn must be an object. They key/value pairs in this object define the intialization
						parameters.</p>

					<aside title="ReSpec metadata script tag and variable">
						<pre><code aria-busy="false" class="hljs xml"><span class="hljs-tag">&lt;<span class="hljs-name">html</span> …&gt;</span>
   <span class="hljs-tag">&lt;<span class="hljs-name">head</span>&gt;</span>
      …
      <span class="hljs-tag">&lt;<span class="hljs-name">script</span>
         <span class="hljs-attr">src</span>=<span class="hljs-string">"https://www.w3.org/Tools/respec/respec-w3c"</span>
         <span class="hljs-attr">class</span>=<span class="hljs-string">"remove"</span>&gt;</span>
      <span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"remove"</span>&gt;</span><span class="javascript">
         <span class="hljs-keyword">var</span> respecConfig = {
            …
         }
      </span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span>
   <span class="hljs-tag">&lt;/<span class="hljs-name">head</span>&gt;</span>
   …
<span class="hljs-tag">&lt;/<span class="hljs-name">html</span>&gt;</span></code></pre>
					</aside>

					<p>The initialization metadata controls such aspects of the document as the links at the top of the
						document (current version, previous version, etc.), the lists of editors and authors, etc.</p>

					<p>Setting the various metadata properties goes beyond this tutorial, however. Refer to the <a href="https://respec.org/docs/">ReSpec Documentation</a> for more information.</p>
				</section>

				<section id="respec-confirm"><div class="header-wrapper"><h4 id="x2-2-3-confirming-the-respec-setup"><bdi class="secno">2.2.3 </bdi>Confirming the ReSpec setup</h4><a class="self-link" href="#respec-confirm" aria-label="Permalink for Section 2.2.3"></a></div>
					

					<p>Once the ReSpec code and initialization metadata are set, all you need to do to verify the setup
						is open the document in a browser.</p>

					<div class="note" role="note" id="issue-container-generatedID-1"><div role="heading" class="note-title marker" id="h-note-1" aria-level="5"><span>Note</span></div><div class="">
						<p>Although you can open a ReSpec document on your local file system by double-clicking it, it
							is often better to use a server like Apache or IIS to serve the document. If your
							specification uses ReSpec file includes, for example, these will only work from a
							server.</p>
					</div></div>

					<p>If the configuration is successful, you will get an HTML document with a table of contents on one
						side and a ReSpec button positioned at the top left.</p>

					<img src="images/respec-button.png" width="100" alt="Respec button">

					<p>If the ReSpec button is present, there is nothing else you need to do but reload the document to
						view your changes as you go. If you click on the ReSpec button, it only provides options to
						export the specification (for publication) and to search for references.</p>

					<p>If the ReSpec button is missing, then initialization failed. In this case, check the browser's
						JavaScript console (in the browser tools) for more information. The most common problem is
						invalid JSON in the initialization metadata (e.g., a missing comma).</p>
				</section>
			</section>

			<section id="respec-err-warn"><div class="header-wrapper"><h3 id="x2-3-errors-and-warnings"><bdi class="secno">2.3 </bdi>Errors and warnings</h3><a class="self-link" href="#respec-err-warn" aria-label="Permalink for Section 2.3"></a></div>
				

				<p>ReSpec will alert you to any errors and warnings it can detect.</p>

				<p>For errors, a red oval button with a number indicating the number of errors will appear beside the
					ReSpec box at the top of the document.</p>

				<img src="images/respec-errors.png" width="175" alt="Error indicator">

				<p>Click on the oval to get a list of errors.</p>

				<p>Warnings are the same, but the indicator is a yellow oval.</p>

				<img src="images/respec-warnings.png" width="175" alt="Warning indicator">

				<p>Make sure all errors are fixed. Not all warnings need fixing but they need to be evaluated on a
					case-by-case basis.</p>
			</section>
		</section>
		<section id="editing"><div class="header-wrapper"><h2 id="x3-editing"><bdi class="secno">3. </bdi>Editing</h2><a class="self-link" href="#editing" aria-label="Permalink for Section 3."></a></div>
			

			<section id="spec-structure"><div class="header-wrapper"><h3 id="x3-1-sectioning-specifications"><bdi class="secno">3.1 </bdi>Sectioning specifications</h3><a class="self-link" href="#spec-structure" aria-label="Permalink for Section 3.1"></a></div>
				

				<section id="sections"><div class="header-wrapper"><h4 id="x3-1-1-using-sections"><bdi class="secno">3.1.1 </bdi>Using sections</h4><a class="self-link" href="#sections" aria-label="Permalink for Section 3.1.1"></a></div>
					

					<p>Section tags are an important part of structuring a specification, and you must author DAISY
						specifications using <code>section</code> tags around each self-contained section of
						content.</p>

					<p>Every <code>section</code> tag should contain a unique ID in its <code>id</code> attribute.
						Although ReSpec will add IDs if they are missing (with the value match the heading), relying on
						this feature is strongly discouraged. If you later change your title, for example, links to it
						will break if you rely on ReSpec's dynamic identifying.</p>

					<p>The <code>section</code> tag is also used to differentiate <a href="#informative-sections">informative content</a> from <a href="#normative-sections">normative content</a>, as
						described in more detail in the next two subsections.</p>

					<p>In addition, every section must have a heading. Ensure that the number of heading tag matches its
						nesting. The top-most sections in a specification must have <code>h2</code> headings – ReSpec
						uses <code>h1</code> for the document title.</p>

					<div class="note" role="note" id="issue-container-generatedID-2"><div role="heading" class="note-title marker" id="h-note-2" aria-level="5"><span>Note</span></div><div class="">
						<p>ReSpec will attempt to correct misnumbered heading tags.</p>
					</div></div>

					<p>Use sentence case for headings — only the first letter is capitalized unless there are also
						proper nouns in the title.</p>

					<p>Do not add numbers your headings (e.g., "<code>&lt;h2&gt;1. …&lt;/h2&gt;</code>"). ReSpec will
						add the correct numbering based on whether the content is preliminary, body, or back matter.</p>

					<div class="note" role="note" id="issue-container-generatedID-3"><div role="heading" class="note-title marker" id="h-note-3" aria-level="5"><span>Note</span></div><div class="">
						<p>If a heading occurs without a <code>section</code> tag, ReSpec will attempt to add one to
							match what it infers to be the correct structure (usually by making a subsection). Be
							careful about relying on this kind of auto-correction.</p>
					</div></div>
				</section>

				<section id="normative-sections"><div class="header-wrapper"><h4 id="x3-1-2-normative-sections"><bdi class="secno">3.1.2 </bdi>Normative sections</h4><a class="self-link" href="#normative-sections" aria-label="Permalink for Section 3.1.2"></a></div>
					

					<p>All specifications are composed of normative and informative sections. Normative sections include
						the requirements the author, reading system, etc. must follow.</p>

					<p>In DAISY specifications, all sections are normative by default. You do not need to specially mark
						these sections as normative.</p>

					<p>Specifications must include a <a href="#spec-conformance">Conformance section</a>. This section
						explains the <a href="#normative-statements">normative keywords</a> used in the document.</p>

					<section id="normative-statements"><div class="header-wrapper"><h5 id="x3-1-2-1-normative-statements"><bdi class="secno">3.1.2.1 </bdi>Normative statements</h5><a class="self-link" href="#normative-statements" aria-label="Permalink for Section 3.1.2.1"></a></div>
						

						<p>Normative sections are composed of one or more requirements. These requirements must be
							identified by special keywords identified in [<cite><a class="bibref" data-link-type="biblio" href="#bib-rfc2119" title="Key words for use in RFCs to Indicate Requirement Levels">rfc2119</a></cite>].</p>

						<p>These keywords include:</p>

						<ul>
							<li><code><em class="rfc2119">MUST</em></code>, <code><em class="rfc2119">MUST NOT</em></code>, and <strong><em class="rfc2119">REQUIRED</em></strong> – if the target
								of the statement (content, reading system, etc.) does not meet these requirements it is
								non-conforming</li>
							<li><code><em class="rfc2119">SHOULD</em></code>, <code><em class="rfc2119">SHOULD NOT</em></code>, and <code><em class="rfc2119">RECOMMENDED</em></code> – the target
								of the statement should only deviate from these requirements if there is a good
								reason</li>
							<li><code><em class="rfc2119">MAY</em></code> and <code><em class="rfc2119">OPTIONAL</em></code> – meeting these requirements is at the
								discretion of the author or developer.</li>
						</ul>

						<div class="note" role="note" id="issue-container-generatedID-4"><div role="heading" class="note-title marker" id="h-note-4" aria-level="6"><span>Note</span></div><div class="">
							<p>DAISY specifications should not use keywords <em class="rfc2119">SHALL</em> and <em class="rfc2119">SHALL NOT</em>. They are equivalent to
								the "must" keywords and only add confusion.</p>
						</div></div>

						<p>Normative keywords must be in uppercase. Lowercase keywords have no normative weight, but it
							best to avoid these as they confuse most readers.</p>
					</section>
				</section>

				<section id="informative-sections"><div class="header-wrapper"><h4 id="x3-1-3-informative-sections"><bdi class="secno">3.1.3 </bdi>Informative sections</h4><a class="self-link" href="#informative-sections" aria-label="Permalink for Section 3.1.3"></a></div>
					

					<p>Informative sections are for explanatory or illustrative content. They must not contain normative
						statements and should avoid the lowercase equivalents (confuses readers whether the section is
						misidentified as informative).</p>

					<p>Informative sections must be identified by adding an "informative" class to them.</p>

					<aside class="example" id="example-an-informative-section"><div class="marker">
    <a class="self-link" href="#example-an-informative-section">Example<bdi> 1</bdi></a><span class="example-title">: An informative section</span>
  </div>
						<pre><code aria-busy="false" class="hljs xml"><span class="hljs-tag">&lt;<span class="hljs-name">section</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"informative"</span>&gt;</span>
   <span class="hljs-tag">&lt;<span class="hljs-name">h3</span>&gt;</span>Examples<span class="hljs-tag">&lt;/<span class="hljs-name">h3</span>&gt;</span>
   …
<span class="hljs-tag">&lt;/<span class="hljs-name">section</span>&gt;</span></code></pre>
					</aside>

					<p>Be careful how you use the informative class. It applies to the section it is added to as well as
						any subsections that section contains. Marking an entire <a href="#introductions">introduction</a> informative, for example, could incorrectly result in the <a href="#spec-conformance">conformance section</a> and <a href="#spec-terminology">terminology
							section</a> becoming informative.</p>

					<div class="note" role="note" id="issue-container-generatedID-5"><div role="heading" class="note-title marker" id="h-note-5" aria-level="5"><span>Note</span></div><div class="">
						<p>Examples and notes are always considered informative – no special marker is needed.</p>
					</div></div>
				</section>
			</section>

			<section id="prelim"><div class="header-wrapper"><h3 id="x3-2-preliminary-matter"><bdi class="secno">3.2 </bdi>Preliminary matter</h3><a class="self-link" href="#prelim" aria-label="Permalink for Section 3.2"></a></div>
				

				<section id="title-and-subtitle"><div class="header-wrapper"><h4 id="x3-2-1-title-and-subtitle"><bdi class="secno">3.2.1 </bdi>Title and subtitle</h4><a class="self-link" href="#title-and-subtitle" aria-label="Permalink for Section 3.2.1"></a></div>
					

					<p>The title of the specification is specified in the document's <code>title</code> tag.</p>

					<aside class="example" id="example-setting-the-title-for-a-specification"><div class="marker">
    <a class="self-link" href="#example-setting-the-title-for-a-specification">Example<bdi> 2</bdi></a><span class="example-title">: Setting the title for a specification</span>
  </div>
						<pre><code aria-busy="false" class="hljs xml"><span class="hljs-tag">&lt;<span class="hljs-name">html</span> …&gt;</span>
   <span class="hljs-tag">&lt;<span class="hljs-name">head</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">title</span>&gt;</span>eBraille<span class="hljs-tag">&lt;/<span class="hljs-name">title</span>&gt;</span>
   <span class="hljs-tag">&lt;/<span class="hljs-name">head</span>&gt;</span>
   …
<span class="hljs-tag">&lt;/<span class="hljs-name">html</span>&gt;</span></code></pre>
					</aside>

					<p>ReSpec automatically generates an <code>h1</code> in the body using the same value.</p>

					<p>You can add an <code>h1</code> tag with the id "<code>title</code>" to the body if you need html
						tags in the title, but this is rare.</p>

					<p>To add a subtitle, include an <code>h2</code> tag with the id "<code>title</code>".</p>

					<aside class="example" id="example-inlined-title-and-subtitle"><div class="marker">
    <a class="self-link" href="#example-inlined-title-and-subtitle">Example<bdi> 3</bdi></a><span class="example-title">: Inlined title and subtitle</span>
  </div>
						<pre><code aria-busy="false" class="hljs xml"><span class="hljs-tag">&lt;<span class="hljs-name">body</span>&gt;</span>
   <span class="hljs-tag">&lt;<span class="hljs-name">h1</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"title"</span>&gt;</span>Introducing the <span class="hljs-tag">&lt;<span class="hljs-name">code</span>&gt;</span>details<span class="hljs-tag">&lt;/<span class="hljs-name">code</span>&gt;</span> element<span class="hljs-tag">&lt;/<span class="hljs-name">h1</span>&gt;</span>
   <span class="hljs-tag">&lt;<span class="hljs-name">h2</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"subtitle"</span>&gt;</span>Creating expandable accessible descriptions<span class="hljs-tag">&lt;/<span class="hljs-name">h2</span>&gt;</span>
   …
<span class="hljs-tag">&lt;/<span class="hljs-name">body</span>&gt;</span></code></pre>
					</aside>

					<div class="note" role="note" id="issue-container-generatedID-6"><div role="heading" class="note-title marker" id="h-note-6" aria-level="5"><span>Note</span></div><div class="">
						<p>Do not place the title and subtitle inside <code>section</code> tags.</p>
					</div></div>

					<p>Subtitling specifications is usually rare. Use an <a href="#spec-abstract">abstract</a> to
						describe the specification.</p>
				</section>

				<section id="copyright"><div class="header-wrapper"><h4 id="x3-2-2-copyright"><bdi class="secno">3.2.2 </bdi>Copyright</h4><a class="self-link" href="#copyright" aria-label="Permalink for Section 3.2.2"></a></div>
					

					<p>ReSpec will automatically add a W3C copyright statement if one is not provided in the document.
						To avoid this behavior, add a DAISY copyright statement after the opening body tag.</p>

					<aside class="example" id="example-daisy-copyright"><div class="marker">
    <a class="self-link" href="#example-daisy-copyright">Example<bdi> 4</bdi></a><span class="example-title">: DAISY copyright</span>
  </div>
						<pre><code aria-busy="false" class="hljs xml"><span class="hljs-tag">&lt;<span class="hljs-name">body</span>&gt;</span>
   <span class="hljs-tag">&lt;<span class="hljs-name">p</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"copyright"</span>&gt;</span>Copyright © DAISY Consortium 2023<span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span>
   …
<span class="hljs-tag">&lt;/<span class="hljs-name">body</span>&gt;</span></code></pre>
					</aside>

					<div class="note" role="note" id="issue-container-generatedID-7"><div role="heading" class="note-title marker" id="h-note-7" aria-level="5"><span>Note</span></div><div class="">
						<p>If the document has a title or subtitle in the body, the copyright can proceed these
							tags.</p>
					</div></div>
				</section>

				<section id="spec-abstract"><div class="header-wrapper"><h4 id="x3-2-3-abstract"><bdi class="secno">3.2.3 </bdi>Abstract</h4><a class="self-link" href="#spec-abstract" aria-label="Permalink for Section 3.2.3"></a></div>
					

					<p>ReSpec requires every document have an abstract that briefly explains the document.</p>

					<p>To add the abstract, include a <code>section</code> with the id "<code>abstract</code>".</p>

					<aside class="example" id="example-default-abstract-section-tagging"><div class="marker">
    <a class="self-link" href="#example-default-abstract-section-tagging">Example<bdi> 5</bdi></a><span class="example-title">: Default abstract section tagging</span>
  </div>
						<pre><code aria-busy="false" class="hljs xml"><span class="hljs-tag">&lt;<span class="hljs-name">section</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"abstract"</span>&gt;</span>
   <span class="hljs-tag">&lt;<span class="hljs-name">p</span>&gt;</span>…<span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">section</span>&gt;</span></code></pre>
					</aside>

					<div class="note" role="note" id="issue-container-generatedID-8"><div role="heading" class="note-title marker" id="h-note-8" aria-level="5"><span>Note</span></div><div class="">
						<p>Do not add a heading for the abstract. ReSpec will automatically add one.</p>
					</div></div>

					<p>The abstract should only be a few sentences at most. Leave longer explanations for an
						introductory section.</p>

					<p>If you are writing a document that does not need an abstract (e.g., a note), you can suppress the
						section by adding the html <code>hidden</code> attribute. Removing the table of contents entry
						requires scripting, however. Contact DAISY staff to help with this task.</p>
				</section>

				<section id="spec-sotd"><div class="header-wrapper"><h4 id="x3-2-4-status-of-this-document"><bdi class="secno">3.2.4 </bdi>Status of this document</h4><a class="self-link" href="#spec-sotd" aria-label="Permalink for Section 3.2.4"></a></div>
					

					<p>DAISY specifications do not include status sections. Do not include a <code>section</code> tag
						with the id "<code>sotd</code>" as this will trigger ReSpec to include W3C boilerplate.</p>

					<div class="note" role="note" id="issue-container-generatedID-9"><div role="heading" class="note-title marker" id="h-note-9" aria-level="5"><span>Note</span></div><div class="">
						<p>There is no way to overwrite the W3C boilerplate. ReSpec will append any text you write in a
							status section after the boilerplate.</p>

						<p>If DAISY specifications add status sections in the future, a new method for including them
							will be developed.</p>
					</div></div>
				</section>

				<section id="spec-toc"><div class="header-wrapper"><h4 id="x3-2-5-table-of-contents"><bdi class="secno">3.2.5 </bdi>Table of contents</h4><a class="self-link" href="#spec-toc" aria-label="Permalink for Section 3.2.5"></a></div>
					

					<p>ReSpec automatically generates the table of contents from the heading structure.</p>

					<p>How many levels deep the table of contents go can be controlled by the <a href="#respec-metadata">initialization metadata</a>, but it is best not to limit user access.</p>

					<p>Individual sections can be omitted from the table of contents by adding the class
							"<code>noTOC</code>" to them.</p>

					<div class="note" role="note" id="issue-container-generatedID-10"><div role="heading" class="note-title marker" id="h-note-10" aria-level="5"><span>Note</span></div><div class="">
						<p>You cannot use the <code>noTOC</code> class to suppress required sections, like the <a href="#spec-abstract">abstract</a>.</p>
					</div></div>
				</section>

				<section id="introductions"><div class="header-wrapper"><h4 id="x3-2-6-introductions"><bdi class="secno">3.2.6 </bdi>Introductions</h4><a class="self-link" href="#introductions" aria-label="Permalink for Section 3.2.6"></a></div>
					

					<p>DAISY specifications should include an introduction section to group any additional preliminary
						matter.</p>

					<aside class="example" id="example-overview-section"><div class="marker">
    <a class="self-link" href="#example-overview-section">Example<bdi> 6</bdi></a><span class="example-title">: Overview section</span>
  </div>
						<pre><code aria-busy="false" class="hljs xml"><span class="hljs-tag">&lt;<span class="hljs-name">section</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"intro"</span>&gt;</span>
   <span class="hljs-tag">&lt;<span class="hljs-name">h2</span>&gt;</span>Introduction<span class="hljs-tag">&lt;/<span class="hljs-name">h2</span>&gt;</span>
   
   <span class="hljs-tag">&lt;<span class="hljs-name">section</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"overview"</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"informative"</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">h3</span>&gt;</span>Overview<span class="hljs-tag">&lt;/<span class="hljs-name">h3</span>&gt;</span>
      —
   <span class="hljs-tag">&lt;/<span class="hljs-name">section</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">section</span>&gt;</span></code></pre>
					</aside>

					<p>Do not mark the introduction as informative unless all the subsections it contains are also
						informative.</p>

					<p>The following sections explain the most common subsections found in the introduction, but you can
						add any additional explanatory subsections you need.</p>

					<section id="spec-overview"><div class="header-wrapper"><h5 id="x3-2-6-1-overviews-and-backgrounds"><bdi class="secno">3.2.6.1 </bdi>Overviews and Backgrounds</h5><a class="self-link" href="#spec-overview" aria-label="Permalink for Section 3.2.6.1"></a></div>
						

						<p>An overview section provides you the opportunity to informatively describe the purpose, scope
							and features of the specification in more detail than the <a href="#abstract">abstract</a>
							allows. It is generally recommended to always include one in DAISY specifications.</p>

						<p>Make sure mark the overview as informative.</p>

						<aside class="example" id="example-overview-section-0"><div class="marker">
    <a class="self-link" href="#example-overview-section-0">Example<bdi> 7</bdi></a><span class="example-title">: Overview section</span>
  </div>
							<pre><code aria-busy="false" class="hljs xml"><span class="hljs-tag">&lt;<span class="hljs-name">section</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"overview"</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"informative"</span>&gt;</span>
   <span class="hljs-tag">&lt;<span class="hljs-name">h3</span>&gt;</span>Overview<span class="hljs-tag">&lt;/<span class="hljs-name">h3</span>&gt;</span>
   
   <span class="hljs-tag">&lt;<span class="hljs-name">p</span>&gt;</span>
      The need for a common digital braille format —
   <span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">section</span>&gt;</span></code></pre>
						</aside>

						<p>DAISY specifications may also contain background sections, although these are not common. A
							background section differs from an overview in that it delves into the problems that led to
							creating the specification, for example, or outlines how the specification is a response to
							previous efforts. The background should typically follow the overview.</p>

						<aside class="example" id="example-background-section"><div class="marker">
    <a class="self-link" href="#example-background-section">Example<bdi> 8</bdi></a><span class="example-title">: Background section</span>
  </div>
							<pre><code aria-busy="false" class="hljs xml"><span class="hljs-tag">&lt;<span class="hljs-name">section</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"background"</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"informative"</span>&gt;</span>
   <span class="hljs-tag">&lt;<span class="hljs-name">h3</span>&gt;</span>Background<span class="hljs-tag">&lt;/<span class="hljs-name">h3</span>&gt;</span>
   
   <span class="hljs-tag">&lt;<span class="hljs-name">p</span>&gt;</span>
      The first effort to solve the issue of —
   <span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">section</span>&gt;</span></code></pre>
						</aside>
					</section>

					<section id="spec-conformance"><div class="header-wrapper"><h5 id="x3-2-6-2-conformance"><bdi class="secno">3.2.6.2 </bdi>Conformance</h5><a class="self-link" href="#spec-conformance" aria-label="Permalink for Section 3.2.6.2"></a></div>
						

						<p>DAISY specifications must have a conformance section. This section should go after the <a href="#spec-overview">Overview</a>.</p>

						<p>You should not include any text in the conformance section or give it a heading. ReSpec will
							automatically populate the required text.</p>

						<aside class="example" id="example-empty-conformance-section"><div class="marker">
    <a class="self-link" href="#example-empty-conformance-section">Example<bdi> 9</bdi></a><span class="example-title">: Empty conformance section</span>
  </div>
							<pre><code aria-busy="false" class="hljs xml"><span class="hljs-tag">&lt;<span class="hljs-name">section</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"conformance"</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">section</span>&gt;</span></code></pre>
						</aside>

						<p>If you do add content to the section, ReSpec adds it after the boilerplate it generates.</p>

						<div class="note" role="note" id="issue-container-generatedID-11"><div role="heading" class="note-title marker" id="h-note-11" aria-level="6"><span>Note</span></div><div class="">
							<p>If you are writing a informative note, not a specification, omit a conformance section.
								ReSpec will emit a warning but this can be ignored.</p>
						</div></div>
					</section>

					<section id="spec-terminology"><div class="header-wrapper"><h5 id="x3-2-6-3-terminology"><bdi class="secno">3.2.6.3 </bdi>Terminology</h5><a class="self-link" href="#spec-terminology" aria-label="Permalink for Section 3.2.6.3"></a></div>
						

						<p>If your specification uses terms that need defining, add a terminology section in the
							introductory material. This section typically follows the <a href="spec-conformance">conformance section</a>.</p>

						<p>Within the terminology section, add a definition list (<code>dl</code> tag) to define the
							terms.</p>

						<p>Each <code>dt</code> must include a <code>dfn</code> tag around the term. This allows ReSpec
							to harvest the terminology and simplify linking to terms.</p>

						<aside class="example" id="example-typical-terminology-section"><div class="marker">
    <a class="self-link" href="#example-typical-terminology-section">Example<bdi> 10</bdi></a><span class="example-title">: Typical terminology section</span>
  </div>
							<pre><code aria-busy="false" class="hljs xml"><span class="hljs-tag">&lt;<span class="hljs-name">section</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"terminology"</span>&gt;</span>
   <span class="hljs-tag">&lt;<span class="hljs-name">h2</span>&gt;</span>Terminology<span class="hljs-tag">&lt;/<span class="hljs-name">h2</span>&gt;</span>
   
   <span class="hljs-tag">&lt;<span class="hljs-name">dl</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">dt</span>&gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">dfn</span>&gt;</span>Term<span class="hljs-tag">&lt;/<span class="hljs-name">dfn</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">dt</span>&gt;</span>
     
      <span class="hljs-tag">&lt;<span class="hljs-name">dd</span>&gt;</span>
         <span class="hljs-tag">&lt;<span class="hljs-name">p</span>&gt;</span>Definition<span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span>
      <span class="hljs-tag">&lt;/<span class="hljs-name">dd</span>&gt;</span>
      …
   <span class="hljs-tag">&lt;/<span class="hljs-name">dl</span>&gt;</span>
&lt;/section</code></pre>

						</aside>

						<p>Never include normative requirements in a terminology section! Users do not expect to find
							implementation details in definitions. Add requirements to a section most applicable to the
							term.</p>

						<div class="note" role="note" id="issue-container-generatedID-12"><div role="heading" class="note-title marker" id="h-note-12" aria-level="6"><span>Note</span></div><div class="">
							<p>Terminology is always considered a normative part of a specification even if it does not
								contain normative requirements. Do not mark the section as informative.</p>
						</div></div>

						<p>Once a term is defined, you can reference it from an <code>a</code> tag anywhere in the
							document. You do not have to include a <code>href</code> attribute.</p>

						<aside class="example" id="example-link-to-a-definition"><div class="marker">
    <a class="self-link" href="#example-link-to-a-definition">Example<bdi> 11</bdi></a><span class="example-title">: Link to a definition</span>
  </div>
							<pre><code aria-busy="false" class="hljs css">When the &lt;<span class="hljs-selector-tag">a</span>&gt;reading system&lt;/<span class="hljs-selector-tag">a</span>&gt; opens the document …</code></pre>
						</aside>

						<p>Only the first instance of a term in a new section is linked to its definition.</p>

						<p>ReSpec can handle differences in case between the link text and the defined term. It can also
							account for most plural forms of words.</p>

						<p>If you intend to use a shorthand expression of the term (e.g., "reading system" instead of
							"eBraille reading system", you need to define the alternative in the term definition using a
								<code>data-lt</code> attribute.</p>

						<aside class="example" id="example-defining-an-alternative-term"><div class="marker">
    <a class="self-link" href="#example-defining-an-alternative-term">Example<bdi> 12</bdi></a><span class="example-title">: Defining an alternative term</span>
  </div>
							<pre><code aria-busy="false" class="hljs xml"><span class="hljs-tag">&lt;<span class="hljs-name">dt</span>&gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">dfn</span> <span class="hljs-attr">data-lt</span>=<span class="hljs-string">"reading system"</span>&gt;</span>
   eBraille Reading System
<span class="hljs-tag">&lt;/<span class="hljs-name">dfn</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">dt</span>&gt;</span></code></pre>
						</aside>

						<p>If there is more than one alternative, use a vertical bar (<code>|</code>) to separate the
							terms in the attribute.</p>
					</section>
				</section>
			</section>

			<section id="body"><div class="header-wrapper"><h3 id="x3-3-body-matter"><bdi class="secno">3.3 </bdi>Body matter</h3><a class="self-link" href="#body" aria-label="Permalink for Section 3.3"></a></div>
				

				<section id="body-write"><div class="header-wrapper"><h4 id="x3-3-1-how-to-write-the-body"><bdi class="secno">3.3.1 </bdi>How to write the body</h4><a class="self-link" href="#body-write" aria-label="Permalink for Section 3.3.1"></a></div>
					

					<p>Probably the toughest problem you will face when writing a specification is how to structure it
						and what to write about.</p>

					<p>Although there is no simple answer to how to write a specification, the best way to begin the
						process is often to brainstorm a list of topics that you expect you will have to cover. Start by
						coming up with a list of top-level concepts or technologies you expect to define and then work
						at refining this list by filling in the subsections.</p>

					<p>Do not worry about getting this initial outline perfect … finished specifications almost
						never look anything like they did at the outset. You will only discover what you ultimately need
						to add and how to arrange the information as you go.</p>

					<p>Once you have an outline of topics, a useful next step is to think of a specification as a
						teaching guide. You need to introduce your readers to the concepts in a logical sequence that
						allows them to build on the aspects they have already learned. Try arranging your outline so
						that readers do not depend on understanding concepts that are only explained later.</p>

					<p>Finally, do not feel compelled to fill in a specification from top-to-bottom. Begin wherever you
						feel most comfortable and work your way through. Some parts will be much easier to write than
						others and will require less input from the group. Getting some easy wins will make the process
						more rewarding than struggling with harder parts just because they come first.</p>

					<div class="note" role="note" id="issue-container-generatedID-13"><div role="heading" class="note-title marker" id="h-note-13" aria-level="5"><span>Note</span></div><div class="">
						<p>The rest of this section deals with writing conveniences provided by ReSpec.</p>
					</div></div>
				</section>

				<section id="writing-guidelines"><div class="header-wrapper"><h4 id="x3-3-2-writing-guidelines"><bdi class="secno">3.3.2 </bdi>Writing guidelines</h4><a class="self-link" href="#writing-guidelines" aria-label="Permalink for Section 3.3.2"></a></div>
					

					<p>Use the following guidelines when writing DAISY specifications:</p>

					<ul>
						<li>Use US English spelling</li>
						<li>Follow the Chicago Manual of Style grammar and formatting rules</li>
						<li>Do not use contractions (don't, can't, etc.)</li>
						<li>Do not use personal pronouns (I, we, you, etc.)</li>
						<li>Write out acronyms the first time (except where the acronym has become an accepted word,
							like HTML)</li>
						<li>Do not use colloquialisms - assume an international audience</li>
						<li>Prefer active voice ("Authors must …", "Reading systems must …"), but passive
							voice is acceptable for specification writing</li>
					</ul>
				</section>

				<section id="xrefs"><div class="header-wrapper"><h4 id="x3-3-3-cross-references"><bdi class="secno">3.3.3 </bdi>Cross-references</h4><a class="self-link" href="#xrefs" aria-label="Permalink for Section 3.3.3"></a></div>
					

					<p>To cross-reference another section in your specification, use an <code>a</code> tag that
						references the ID of the section.</p>

					<p>If you do not put any text in the <code>a</code> tag, ReSpec will automatically add the number
						and title of the section. (You can also use ReSpec's triple bracket shorthand for referencing
						sections this way: <code>[[[<code>#id</code>]]]</code>.)</p>

					<aside class="example" id="example-cross-reference-with-text-label"><div class="marker">
    <a class="self-link" href="#example-cross-reference-with-text-label">Example<bdi> 13</bdi></a><span class="example-title">: Cross-reference with text label</span>
  </div>
						<pre><code aria-busy="false" class="hljs xml">For more information, refer to the
<span class="hljs-tag">&lt;<span class="hljs-name">a</span> <span class="hljs-attr">href</span>=<span class="hljs-string">"#html-restrictions"</span>&gt;</span>HTML restrictions<span class="hljs-tag">&lt;/<span class="hljs-name">a</span>&gt;</span>.</code></pre>
					</aside>

					<aside class="example" id="example-cross-reference-without-text-label"><div class="marker">
    <a class="self-link" href="#example-cross-reference-without-text-label">Example<bdi> 14</bdi></a><span class="example-title">: Cross-reference without text label</span>
  </div>
						<p>In this example, if the section with the ID "html-restrictions" is the sixth in the document
							and has the heading "HTML restriced elements", ReSpec will create the label "6. HTML
							restricted elements" for the link.</p>
						<pre><code aria-busy="false" class="hljs xml">For more information, refer to
<span class="hljs-tag">&lt;<span class="hljs-name">a</span> <span class="hljs-attr">href</span>=<span class="hljs-string">"#html-restrictions"</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">a</span>&gt;</span>.</code></pre>
						<pre><code aria-busy="false" class="hljs css">For more information, refer <span class="hljs-selector-tag">to</span> <span class="hljs-selector-attr">[[[#html-restrictions]</span>]].</code></pre>
					</aside>
				</section>

				<section id="refs"><div class="header-wrapper"><h4 id="ref-hd"><bdi class="secno">3.3.4 </bdi>References</h4><a class="self-link" href="#ref-hd" aria-label="Permalink for Section 3.3.4"></a></div>
					

					<section id="ref-specs" aria-labelledby="ref-hd ref-specs-hd"><div class="header-wrapper"><h5 id="ref-specs-hd"><bdi class="secno">3.3.4.1 </bdi>To other specifications</h5><a class="self-link" href="#ref-specs-hd" aria-label="Permalink for Section 3.3.4.1"></a></div>
						

						<p>When referencing elements, attributes, definitions, concepts, etc. another specification, you
							must cite the specification.</p>

						<p>ReSpec supports a shorthand syntax for specification references using two brackets on either
							side of the specification's shortname: <code>[[shortname]]</code></p>

						<p>To find the shortname to use for a specification, go to <a href="https://specref.org">https://specref.org</a> (there is also a link to this page from the ReSpec button).</p>

						<p>Specification references may be normative or informative. References inherit this designation
							from the type of section they are in.</p>

						<aside class="example" id="example-normative-reference"><div class="marker">
    <a class="self-link" href="#example-normative-reference">Example<bdi> 15</bdi></a><span class="example-title">: Normative reference</span>
  </div>
							<pre><code aria-busy="false" class="hljs xml"><span class="hljs-tag">&lt;<span class="hljs-name">section</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"toc-req"</span>&gt;</span>
   <span class="hljs-tag">&lt;<span class="hljs-name">h2</span>&gt;</span>Table of contents requirements<span class="hljs-tag">&lt;/<span class="hljs-name">h2</span>&gt;</span>
   <span class="hljs-tag">&lt;<span class="hljs-name">p</span>&gt;</span>The table of contents MUST be defined in an [[html]] [^nav^] element.<span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span>
   …
<span class="hljs-tag">&lt;/<span class="hljs-name">section</span>&gt;</span></code></pre>
						</aside>

						<aside class="example" id="example-informative-reference-in-an-note"><div class="marker">
    <a class="self-link" href="#example-informative-reference-in-an-note">Example<bdi> 16</bdi></a><span class="example-title">: Informative reference in an note</span>
  </div>
							<p>Because notes are informative, the reference becomes informative.</p>
							<pre><code aria-busy="false" class="hljs xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"note"</span>&gt;</span>
   <span class="hljs-tag">&lt;<span class="hljs-name">p</span>&gt;</span>The [[html]] [^details^] element still has support issues
      in some reading systems.<span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></code></pre>
						</aside>

						<p>If informative references are used in normative sections, you must mark the reference as
							informative by adding a question mark before the shortname.</p>

						<aside class="example" id="example-informative-reference-in-a-normative-section"><div class="marker">
    <a class="self-link" href="#example-informative-reference-in-a-normative-section">Example<bdi> 17</bdi></a><span class="example-title">: Informative reference in a normative section</span>
  </div>
							<pre><code aria-busy="false" class="hljs">Images MUST include alternative text (e.g., in the [[?html]] [^img^]
element's [^img/alt^] attribute).</code></pre>
						</aside>

						<p>Normative references are not allowed in informative content.</p>

						<p>ReSpec automatically builds a references section in the back matter and sorts the references
							into normative and informative subsections.</p>
					</section>

					<section id="ref-markup" aria-labelledby="ref-hd ref-markup-hd"><div class="header-wrapper"><h5 id="ref-markup-hd"><bdi class="secno">3.3.4.2 </bdi>To elements and attributes</h5><a class="self-link" href="#ref-markup-hd" aria-label="Permalink for Section 3.3.4.2"></a></div>
						

						<p>ReSpec also has a shorthand for linking to elements in other specifications using a bracket
							and circumflex around the element's name: <code>[^<code>element</code>^]</code></p>

						<aside class="example" id="example-reference-to-the-html-iframe-element"><div class="marker">
    <a class="self-link" href="#example-reference-to-the-html-iframe-element">Example<bdi> 18</bdi></a><span class="example-title">: Reference to the HTML iframe element</span>
  </div>
							<pre><code aria-busy="false" class="hljs css">The <span class="hljs-selector-attr">[[html]</span>] <span class="hljs-selector-attr">[^iframe^]</span> element …</code></pre>
						</aside>

						<p>To reference an attribute, you typically add a slash after the element's name:
									<code>[^<code>element/attribute</code>^]</code></p>

						<aside class="example" id="example-reference-to-the-html-img-element-s-src-attribute"><div class="marker">
    <a class="self-link" href="#example-reference-to-the-html-img-element-s-src-attribute">Example<bdi> 19</bdi></a><span class="example-title">: Reference to the HTML img element's src attribute</span>
  </div>
							<pre><code aria-busy="false" class="hljs css">The <span class="hljs-selector-attr">[^img/src^]</span> attribute …</code></pre>
						</aside>

						<div class="note" role="note" id="issue-container-generatedID-14"><div role="heading" class="note-title marker" id="h-note-14" aria-level="6"><span>Note</span></div><div class="">
							<p>ReSpec replaces the attribute shorthand with the attribute's actual name. In the previous
								example, only "The <code>src</code> attribute" will appear in the rendered text.</p>
						</div></div>

						<p>Element and attribute shorthands are only available for HTML and SVG.</p>

						<p>If you are unsure what shorthand to use, or are getting an error, go to <a href="https://respec.org/xref/">https://respec.org/xref/</a> and make sure you have the
							correct reference.</p>

						<p>If more than one specification defines an element or attribute, you may need to tell ReSpec
							which one you mean to reference by adding a <code>data-cite</code> attribute. The value of
							this attribute is the same shorthand name you use to <a href="#ref-specs">reference the
								specification</a>.</p>

						<aside class="example" id="example-identifying-the-link-element-s-source"><div class="marker">
    <a class="self-link" href="#example-identifying-the-link-element-s-source">Example<bdi> 20</bdi></a><span class="example-title">: Identifying the link element's source</span>
  </div>
							<pre><code aria-busy="false" class="hljs xml"><span class="hljs-tag">&lt;<span class="hljs-name">p</span> <span class="hljs-attr">data-cite</span>=<span class="hljs-string">"html"</span>&gt;</span>The [[html]] [^link^] element …<span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span></code></pre>
						</aside>
					</section>

					<section id="ref-concepts" aria-labelledby="ref-hd ref-concept-hd"><div class="header-wrapper"><h5 id="ref-concept-hd"><bdi class="secno">3.3.4.3 </bdi>To concepts and definitions</h5><a class="self-link" href="#ref-concept-hd" aria-label="Permalink for Section 3.3.4.3"></a></div>
						

						<p>Concepts and definitions are defined in <code>dfn</code> tags.</p>

						<p>ReSpec has a shorthand for referencing these using a bracket and equals sign around the term:
									<code>[=<code>term</code>=]</code></p>

						<aside class="example" id="example-referencing-a-concept"><div class="marker">
    <a class="self-link" href="#example-referencing-a-concept">Example<bdi> 21</bdi></a><span class="example-title">: Referencing a concept</span>
  </div>
							<pre><code aria-busy="false" class="hljs css">… the &lt;<span class="hljs-selector-tag">dfn</span>&gt;base url of the container&lt;/<span class="hljs-selector-tag">dfn</span>&gt; is …
…
When appending the <span class="hljs-selector-attr">[=base url of the container=]</span> …
</code></pre>
						</aside>

						<p>Concepts can be defined either in the current specification or in another, like [<cite><a class="bibref" data-link-type="biblio" href="#bib-infra" title="Infra Standard">infra</a></cite>] or
							[<cite><a class="bibref" data-link-type="biblio" href="#bib-url" title="URL Standard">url</a></cite>].</p>
					</section>
				</section>

				<section id="adding-notes"><div class="header-wrapper"><h4 id="x3-3-5-adding-notes"><bdi class="secno">3.3.5 </bdi>Adding notes</h4><a class="self-link" href="#adding-notes" aria-label="Permalink for Section 3.3.5"></a></div>
					

					<p>There are two main types of notes:</p>

					<dl>
						<dt>Regular notes</dt>
						<dd>
							<p>Regulat notes are like asides … they are used to informatively describe issues to
								readers.</p>
							<p>To add a note, use the class "<code>note</code>".</p>
							<aside class="example" id="example-typical-note-markup"><div class="marker">
    <a class="self-link" href="#example-typical-note-markup">Example<bdi> 22</bdi></a><span class="example-title">: Typical note markup</span>
  </div>
								<pre><code aria-busy="false" class="hljs xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"note"</span>&gt;</span>
   <span class="hljs-tag">&lt;<span class="hljs-name">p</span>&gt;</span>Note text<span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></code></pre>
							</aside>
							<p>You can also add a descriptive caption using the <code>title</code> attribute but this is
								not commonly done for notes.</p>
							<p>If a note is only a single paragraph, you can use the <code>note</code> class directly on
								the paragraph tag. The one downside of this approach is that it makes notes slightly
								hard to spot visually when editing (the extra <code>div</code> wrapper makes the
								paragraph stand out from any others around it.</p>
						</dd>

						<dt>Editor's notes</dt>
						<dd>
							<p>Editor's notes inform readers about issues that are still to be addressed in the
								specification.</p>
							<p>To add an editor's note, use the class "<code>ednote</code>".</p>
							<aside class="example" id="example-typical-editor-note-markup"><div class="marker">
    <a class="self-link" href="#example-typical-editor-note-markup">Example<bdi> 23</bdi></a><span class="example-title">: Typical editor note markup</span>
  </div>
								<pre><code aria-busy="false" class="hljs xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"ednote"</span>&gt;</span>
   <span class="hljs-tag">&lt;<span class="hljs-name">p</span>&gt;</span>Note text<span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></code></pre>
							</aside>
							<div class="note" role="note" id="issue-container-generatedID-15"><div role="heading" class="note-title marker" id="h-note-15" aria-level="5"><span>Note</span></div><div class="">
								<p>Editor's notes are only allowed while you are working on the specification. They must
									be removed prior to final publication.</p>
							</div></div>
						</dd>
					</dl>
				</section>

				<section id="adding-examples"><div class="header-wrapper"><h4 id="x3-3-6-adding-examples"><bdi class="secno">3.3.6 </bdi>Adding examples</h4><a class="self-link" href="#adding-examples" aria-label="Permalink for Section 3.3.6"></a></div>
					

					<p>To add examples, use an <code>aside</code> tag with the class "<code>example</code>".</p>

					<p>Use the <code>title</code> attribute to add a descriptive caption for the example. It is strongly
						recommended to title examples to make it easier for readers to understand their purpose.</p>

					<p>Use <code>&lt;pre&gt;</code> and <code>&lt;code&gt;</code> tags to wrap the example markup.</p>

					<aside>
						<pre><code aria-busy="false" class="hljs xml"><span class="hljs-tag">&lt;<span class="hljs-name">aside</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"example"</span> <span class="hljs-attr">title</span>=<span class="hljs-string">"Adding foo to bar"</span>&gt;</span>
   <span class="hljs-tag">&lt;<span class="hljs-name">pre</span>&gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">code</span>&gt;</span><span class="hljs-symbol">&amp;lt;</span>p&gt; <span class="hljs-symbol">&amp;#8230;</span><span class="hljs-symbol">&amp;lt;</span>/p&gt;<span class="hljs-tag">&lt;/<span class="hljs-name">code</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">pre</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">aside</span>&gt;</span></code></pre>
					</aside>

					<div class="note" role="note" id="issue-container-generatedID-16"><div role="heading" class="note-title marker" id="h-note-16" aria-level="5"><span>Note</span></div><div class="">
						<p>Make sure to escape opening brackets in the example.</p>
					</div></div>

					<p>If necessary, you can add a more thorough description of the example using <code>&lt;p&gt;</code>
						tags.</p>

					<aside class="example" id="example-example-with-description"><div class="marker">
    <a class="self-link" href="#example-example-with-description">Example<bdi> 24</bdi></a><span class="example-title">: Example with description</span>
  </div>
						<pre><code aria-busy="false" class="hljs xml"><span class="hljs-tag">&lt;<span class="hljs-name">aside</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"example"</span> <span class="hljs-attr">title</span>=<span class="hljs-string">"Adding bar to foo"</span>&gt;</span>
   <span class="hljs-tag">&lt;<span class="hljs-name">p</span>&gt;</span>In the example, the foo is … <span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span>
   …
<span class="hljs-tag">&lt;/<span class="hljs-name">aside</span>&gt;</span></code></pre>
					</aside>

					<p>ReSpec will automatically number examples.</p>
				</section>
			</section>

			<section id="backmatter"><div class="header-wrapper"><h3 id="x3-4-back-matter"><bdi class="secno">3.4 </bdi>Back matter</h3><a class="self-link" href="#backmatter" aria-label="Permalink for Section 3.4"></a></div>
				

				<section id="adding-app"><div class="header-wrapper"><h4 id="x3-4-1-adding-appendixes"><bdi class="secno">3.4.1 </bdi>Adding appendixes</h4><a class="self-link" href="#adding-app" aria-label="Permalink for Section 3.4.1"></a></div>
					

					<p>Marking a section as an appendix changes its numbering to alphabetic and signifies it is in the
						back matter.</p>

					<p>To indicate a section is an appendix, add the class <code>appendix</code> to its
							<code>section</code> tag.</p>

					<aside class="example" id="example-a-section-marked-as-an-appendix"><div class="marker">
    <a class="self-link" href="#example-a-section-marked-as-an-appendix">Example<bdi> 25</bdi></a><span class="example-title">: A section marked as an appendix</span>
  </div>
						<pre><code aria-busy="false" class="hljs xml"><span class="hljs-tag">&lt;<span class="hljs-name">section</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"appendix"</span>&gt;</span>
   …
<span class="hljs-tag">&lt;/<span class="hljs-name">section</span>&gt;</span></code></pre>
					</aside>

					<p>Appendixes are not informative by default, but they are typically used for informative content.
						An informative class must be added if the appendix is not normative.</p>

					<aside class="example" id="example-an-informative-appendix"><div class="marker">
    <a class="self-link" href="#example-an-informative-appendix">Example<bdi> 26</bdi></a><span class="example-title">: An informative appendix</span>
  </div>
						<pre><code aria-busy="false" class="hljs xml"><span class="hljs-tag">&lt;<span class="hljs-name">section</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"appendix informative"</span>&gt;</span>
   …
<span class="hljs-tag">&lt;/<span class="hljs-name">section</span>&gt;</span></code></pre>
					</aside>

					<p>Appendixes must be the last sections in the document. ReSpec will convert all sections after the
						first marked as an appendix to appendices, whether you wanted them as appendixes or not!</p>
				</section>

				<section id="spec-change-log"><div class="header-wrapper"><h4 id="x3-4-2-change-log-entries"><bdi class="secno">3.4.2 </bdi>Change log entries</h4><a class="self-link" href="#spec-change-log" aria-label="Permalink for Section 3.4.2"></a></div>
					

					<p>ReSpec currently does not help you out with change logs.</p>

					<p>Change log entries should be dated and provide a concise description of the change. Best practice
						is to also include a link to the github issue for each entry.</p>

					<aside>
						<pre><code aria-busy="false" class="hljs xml"><span class="hljs-tag">&lt;<span class="hljs-name">li</span>&gt;</span>
   2023-10-12 — Updated parsing algorithm for the
   table of contents. Refer to <span class="hljs-tag">&lt;<span class="hljs-name">a</span>
   <span class="hljs-attr">href</span>=<span class="hljs-string">"https://www.github.com/daisy/ex/issues/234"</span>&gt;</span>issue
   234<span class="hljs-tag">&lt;/<span class="hljs-name">a</span>&gt;</span>.
<span class="hljs-tag">&lt;/<span class="hljs-name">li</span>&gt;</span></code></pre>
					</aside>

					<p>A change log may not be needed for a new specification, but can help readers track changes since
						the last publication.</p>
				</section>
			</section>

			<section id="custom-css"><div class="header-wrapper"><h3 id="x3-5-custom-styling"><bdi class="secno">3.5 </bdi>Custom styling</h3><a class="self-link" href="#custom-css" aria-label="Permalink for Section 3.5"></a></div>
				

				<p>Although ReSpec provides a default look and feel, it does not cover everything you may need when
					writing a specification.</p>

				<p>To use custom styling, simply add a <code>style</code> tag to the document header with the necessary
					css.</p>

				<p>Do not change the appearance of specifications just because you do not like the ReSpec defaults!
					Limit custom css to unhandled needs.</p>
			</section>
		</section>
		<section id="github"><div class="header-wrapper"><h2 id="x4-github-repositories"><bdi class="secno">4. </bdi>GitHub repositories</h2><a class="self-link" href="#github" aria-label="Permalink for Section 4."></a></div>
			

			<section id="github-tools"><div class="header-wrapper"><h3 id="x4-1-tools"><bdi class="secno">4.1 </bdi>Tools</h3><a class="self-link" href="#github-tools" aria-label="Permalink for Section 4.1"></a></div>
				

				<dl>
					<dt><a href="https://git-scm.com/">Git command line</a></dt>
					<dd>
						<ul>
							<li>Pros: extensive functionality</li>
							<li>Cons: difficult to learn/remember the commands, have to manually store GitHub
								credentials</li>
						</ul>
					</dd>

					<dt><a href="">GitHub web site</a></dt>
					<dd>
						<ul>
							<li>Pros: easy to use, essential for some actions</li>
							<li>Cons: limited functionality, not always accessible</li>
						</ul>
					</dd>

					<dt><a href="https://desktop.github.com/">GitHub Desktop</a></dt>
					<dd>
						<ul>
							<li>Pros: graphical interface, installs git command line</li>
							<li>Cons: not always intuitive</li>
						</ul>
					</dd>

					<dt><a href="https://tortoisegit.org/">TortoiseGit</a></dt>
					<dd>
						<ul>
							<li>Pros: easy to use, ability to run most commands, overlays to show changed files</li>
							<li>Cons: Windows-only, only available in right-click context menu, overlays not
								accessible</li>
						</ul>
					</dd>
				</dl>
			</section>

			<section id="repos-manage"><div class="header-wrapper"><h3 id="x4-2-managing-repositories"><bdi class="secno">4.2 </bdi>Managing repositories</h3><a class="self-link" href="#repos-manage" aria-label="Permalink for Section 4.2"></a></div>
				

				<section id="clone-v-fork"><div class="header-wrapper"><h4 id="x4-2-1-cloning-v-forking-repositories"><bdi class="secno">4.2.1 </bdi>Cloning v. forking repositories</h4><a class="self-link" href="#clone-v-fork" aria-label="Permalink for Section 4.2.1"></a></div>
					

					<dl>
						<dt>Cloning</dt>
						<dd>
							<p>Cloning a repository downloads a copy of the repository to your local machine.</p>
							<p>After cloning, create branches to work on changes.</p>
							<p>After editing, you create a pull request from the branch in the source repository.</p>
							<p>Cloning is the preferred work mode for editors.</p>
						</dd>

						<dt>Forking</dt>
						<dd>
							<p>Forking a repository makes a copy under your GitHub account.</p>
							<p>Forking is used when you don't have access to edit the source repository.</p>
							<p>You still need to clone your fork to your local machine to edit the files.</p>
							<p>After editing, you create a pull request to the original repository from the fork.</p>
							<p>You don't have to use branches to edit, but they are advised.</p>
							<p>Forks are more difficult to work with as you have to keep your fork up-to-date.</p>
						</dd>
					</dl>
				</section>

				<section id="repo-checkout"><div class="header-wrapper"><h4 id="x4-2-2-checking-out-a-repository"><bdi class="secno">4.2.2 </bdi>Checking out a repository</h4><a class="self-link" href="#repo-checkout" aria-label="Permalink for Section 4.2.2"></a></div>
					

					<p>From GitHub</p>

					<p>Go to the repository.</p>

					<p>Click on the "<code>&lt;&gt; Code</code>" button.</p>

					<p>Select "Open with GitHub Desktop" to download.</p>

					<p>You will be prompted where to save the repository.</p>

					<p>From the command line.</p>

					<p>Create a directory for your repositories.</p>

					<p>Get the URL of the repository - for example, <code>https://github.com/daisy/ebraille</code>.</p>

					<p>Run the command:</p>
					<pre><code aria-busy="false" class="hljs javascript">git clone https:<span class="hljs-comment">//github.com/daisy/ebraille</span></code></pre>

					<p>A new subdirectory named "ebraille" will be created with the source.</p>
				</section>
			</section>

			<section id="pull-requests"><div class="header-wrapper"><h3 id="x4-3-pull-requests"><bdi class="secno">4.3 </bdi>Pull requests</h3><a class="self-link" href="#pull-requests" aria-label="Permalink for Section 4.3"></a></div>
				

				<section id="open-pr"><div class="header-wrapper"><h4 id="x4-3-1-opening-a-pull-request"><bdi class="secno">4.3.1 </bdi>Opening a pull request</h4><a class="self-link" href="#open-pr" aria-label="Permalink for Section 4.3.1"></a></div>
					

					<p>Go to the "Pull requests" section of the repository on Github.</p>

					<p>Click the "New pull request" button.</p>

					<p>Use a descriptive title.</p>

					<p>Describe the changes.</p>

					<p>Link a related issue using # followed by the issue number.</p>

					<p>Automatically close an issue when merged by adding "Fixes" before the issue number – "Fixes
						#23".</p>
				</section>

				<section id="request-reviews"><div class="header-wrapper"><h4 id="x4-3-2-request-reviews"><bdi class="secno">4.3.2 </bdi>Request reviews</h4><a class="self-link" href="#request-reviews" aria-label="Permalink for Section 4.3.2"></a></div>
					

					<p>Pull requests should always be reviewed by at least one other editor before merging.</p>

					<p>It is best to pick editors also involved with the issue you are addressing, but if in doubt never
						worry about asking for too many reviewers.</p>

					<p>If you don't request a review, editor's may not be aware you want their input.</p>

					<p>To request a review, go to the "Reviewers" section in the pull request and click on the
						heading.</p>

					<p>Enter the GitHub usernames of the people you want to review and select their accounts.</p>

					<p>If you are an editor, you can merge your pull request after receiving approvals.</p>

					<p>If you are not an editor, let the editors decide when to merge.</p>
				</section>

				<section id="review-pr"><div class="header-wrapper"><h4 id="x4-3-3-reviewing-pull-requests"><bdi class="secno">4.3.3 </bdi>Reviewing pull requests</h4><a class="self-link" href="#review-pr" aria-label="Permalink for Section 4.3.3"></a></div>
					

					<p>Open the pull request to review.</p>

					<p>Click on the "Add your review" button or select the "Files changed" tab.</p>

					<p>Click on "Review changes" and select approve if everything is okay.</p>

					<p>Otherwise, add comments to the changes by clicking on the + button (labelled "Add line
						comment").</p>

					<p>Select the closest line for comments to avoid confusion.</p>

					<p>Click "Start a review" if you expect to add more than one comment, otherwise click "Add single
						comment".</p>

					<p>Click the "Finish your review" button to post your comments.</p>

					<p>Select either "Comment" if they are suggestions or "Request changes" if fixes are needed.</p>

					<p>To make general comments not specific to the changed source, use the text box at the bottom of
						the Conversation tab.</p>
				</section>

				<section id="edit-pr"><div class="header-wrapper"><h4 id="x4-3-4-editing-a-pull-request"><bdi class="secno">4.3.4 </bdi>Editing a pull request</h4><a class="self-link" href="#edit-pr" aria-label="Permalink for Section 4.3.4"></a></div>
					

					<p>Sometimes you might want to make a change to another person's pull request – to fix a typo, or
						modify the text after a discussion.</p>

					<p>Follow these steps:</p>

					<ol>
						<li>Pull the latest data</li>
						<li>Checkout the branch used to create the pull request</li>
						<li>Modify the files</li>
						<li>Commit and push the changes</li>
					</ol>

					<p>The pull request is automatically updated with the commit.</p>

					<p>Users will be notified of changes to an open pull request.</p>
				</section>

				<section id="pr-on-pr"><div class="header-wrapper"><h4 id="x4-3-5-pull-requests-on-pull-requests"><bdi class="secno">4.3.5 </bdi>Pull requests on pull requests</h4><a class="self-link" href="#pr-on-pr" aria-label="Permalink for Section 4.3.5"></a></div>
					

					<p>Sometimes you may want to propose extensive changes to a pull request and have them reviewed
						before modifying the original pull request.</p>

					<p>Follow these steps:</p>

					<ol>
						<li>Pull the latest data</li>
						<li>Checkout the branch used to create the pull request</li>
						<li>Create a new branch</li>
						<li>Checkout the new branch</li>
						<li>Modify the files</li>
						<li>Commit the changes</li>
						<li>Open a new pull request</li>
					</ol>

					<p>When opening the new pull request, make sure the base branch is not "main".</p>
				</section>
			</section>

			<section id="branches"><div class="header-wrapper"><h3 id="x4-4-branches"><bdi class="secno">4.4 </bdi>Branches</h3><a class="self-link" href="#branches" aria-label="Permalink for Section 4.4"></a></div>
				

				<section id="branch-create"><div class="header-wrapper"><h4 id="x4-4-1-create-a-branch"><bdi class="secno">4.4.1 </bdi>Create a branch</h4><a class="self-link" href="#branch-create" aria-label="Permalink for Section 4.4.1"></a></div>
					

					<p>From GitHub</p>

					<p>Go to the "Code" section of the repository.</p>

					<p>Click the button that shows the Main branch.</p>

					<p>Is actually a details element with the summary "Click branches or tags".</p>

					<p>Enter a name for your branch and click the option to create it.</p>

					<p>From the command line.</p>

					<p>From the directory containing the repository source, run:</p>
					<pre><code aria-busy="false" class="hljs">git branch branch-name</code></pre>

					<p>Try to make branch names short but unique – e.g., name after the issue number it addresses.</p>

					<p>Add a prefix to make the branch name more specific – e.g., "metadata/xyz".</p>

					<p>Make sure you are in the "main" branch when creating new branches.</p>
				</section>

				<section id="branch-switch"><div class="header-wrapper"><h4 id="x4-4-2-switching-branches"><bdi class="secno">4.4.2 </bdi>Switching branches</h4><a class="self-link" href="#branch-switch" aria-label="Permalink for Section 4.4.2"></a></div>
					

					<p>To change to another branch, run:</p>
					<pre><code aria-busy="false" class="hljs">git checkout branch-name</code></pre>

					<p>To view the current branch you are in, run:</p>
					<pre><code aria-busy="false" class="hljs">git branch --show-current</code></pre>

					<p>To switch back to the main branch, run:</p>
					<pre><code aria-busy="false" class="hljs css">git checkout <span class="hljs-selector-tag">main</span></code></pre>
				</section>

				<section id="branch-delete"><div class="header-wrapper"><h4 id="x4-4-3-deleting-branches"><bdi class="secno">4.4.3 </bdi>Deleting branches</h4><a class="self-link" href="#branch-delete" aria-label="Permalink for Section 4.4.3"></a></div>
					

					<p>If you are no longer using a branch, delete it -- stale branches are confusing to sift through
						later.</p>

					<p>You can delete branches in GitHub as follows:</p>

					<ol>
						<li>Go to the Code tab of the repository</li>
						<li>Click on the "Branches" button</li>
						<li>Click on the garbage can icon next to the branch (button with the label "Delete
							branch-name")</li>
					</ol>

					<p>To delete from the command line, run:</p>
					<pre><code aria-busy="false" class="hljs javascript">git push origin –-<span class="hljs-keyword">delete</span> branch-name</code></pre>

					<p>Branches are automatically deleted from the eBraille repository when a pull request is
						merged.</p>
				</section>
			</section>

			<section id="repo-changes"><div class="header-wrapper"><h3 id="x4-5-managing-changes"><bdi class="secno">4.5 </bdi>Managing changes</h3><a class="self-link" href="#repo-changes" aria-label="Permalink for Section 4.5"></a></div>
				

				<section id="pull-updates"><div class="header-wrapper"><h4 id="x4-5-1-pulling-the-latest-updates"><bdi class="secno">4.5.1 </bdi>Pulling the latest updates</h4><a class="self-link" href="#pull-updates" aria-label="Permalink for Section 4.5.1"></a></div>
					

					<p>Running a "pull" request gets the recent commits, branches, etc., from the source repository.</p>

					<p>If you create a branch in GitHub, you need to run a pull request first before you can check it
						out to work on it.</p>

					<p>To perform a pull request, run:</p>
					<pre><code aria-busy="false" class="hljs">git pull</code></pre>
				</section>

				<section id="commits"><div class="header-wrapper"><h4 id="x4-5-2-committing-changes"><bdi class="secno">4.5.2 </bdi>Committing changes</h4><a class="self-link" href="#commits" aria-label="Permalink for Section 4.5.2"></a></div>
					

					<p>Committing saves local changes – allows you to view new changes.</p>

					<p>Commits require you to include messages explaining your changes.</p>

					<p>To make a commit, run:</p>
					<pre><code aria-busy="false" class="hljs abnf">git commit –a –m <span class="hljs-string">"explanatory message"</span></code></pre>

					<p>Note you have to "add" changed files before you can commit the changes.</p>

					<p>You can commit changes to individual files or multiple files.</p>

					<p>Commits can be made without pushing them to GitHub.</p>
				</section>

				<section id="file-maintenance"><div class="header-wrapper"><h4 id="x4-5-3-file-maintenance"><bdi class="secno">4.5.3 </bdi>File maintenance</h4><a class="self-link" href="#file-maintenance" aria-label="Permalink for Section 4.5.3"></a></div>
					

					<p>To add a file to the repository, run:</p>
					<pre><code aria-busy="false" class="hljs">git add filename.xyz</code></pre>

					<p>To add all unversioned files, run:</p>
					<pre><code aria-busy="false" class="hljs css">git add -<span class="hljs-selector-tag">a</span></code></pre>

					<p>To check for unversioned files, run:</p>
					<pre><code aria-busy="false" class="hljs">git ls-files --other</code></pre>

					<p>To delete a file, run:</p>
					<pre><code aria-busy="false" class="hljs">git rm filename.xyz</code></pre>

					<p>To rename a file, run:</p>
					<pre><code aria-busy="false" class="hljs">git mv oldname.xyz newname.xyz</code></pre>
				</section>

				<section id="push-changes"><div class="header-wrapper"><h4 id="x4-5-4-pushing-changes"><bdi class="secno">4.5.4 </bdi>Pushing changes</h4><a class="self-link" href="#push-changes" aria-label="Permalink for Section 4.5.4"></a></div>
					

					<p>Pushing changes to GitHub saves them remotely.</p>

					<p>To push commits, run:</p>
					<pre><code aria-busy="false" class="hljs">git push origin branch-name</code></pre>

					<p>Undoing commits once they've been pushed can be tricky – more of a danger if pushing straight to
						main.</p>

					<p>Pushing to a branch does not open a pull request.</p>

					<p>Users are not notified of pushes to branches if no pull request is open.</p>
				</section>

				<section id="stash-changes"><div class="header-wrapper"><h4 id="x4-5-5-stashing-changes"><bdi class="secno">4.5.5 </bdi>Stashing changes</h4><a class="self-link" href="#stash-changes" aria-label="Permalink for Section 4.5.5"></a></div>
					

					<p>Sometimes you need to changes branches or work on another issue while still editing.</p>

					<p>Stashing your changes stores them away and leaves the branch "clean".</p>

					<p>When you come back to the branch, you can "pop" the changes from the stash to continue working
						(or pop them in a new branch).</p>

					<p>To stash changes, run:</p>
					<pre><code aria-busy="false" class="hljs abnf">git stash push –m <span class="hljs-string">"stash message"</span></code></pre>

					<p>To view all stashed changes, run:</p>
					<pre><code aria-busy="false" class="hljs">git stash list</code></pre>

					<p>To pop the top-most changes, run:</p>
					<pre><code aria-busy="false" class="hljs">git pop</code></pre>
				</section>
			</section>
		</section>
		<section id="resources"><div class="header-wrapper"><h2 id="x5-helpful-resources"><bdi class="secno">5. </bdi>Helpful resources</h2><a class="self-link" href="#resources" aria-label="Permalink for Section 5."></a></div>
			

			<section id="github-0"><div class="header-wrapper"><h3 id="x5-1-github"><bdi class="secno">5.1 </bdi>GitHub</h3><a class="self-link" href="#github-0" aria-label="Permalink for Section 5.1"></a></div>
				

				<ul>
					<li><a href="https://docs.github.com/en/get-started">Get started with GitHub</a></li>
					<li><a href="https://git-scm.com/docs">Git Command Reference</a></li>
					<li><a href="https://git-scm.com/book/en/v2">Pro Git Book</a></li>
					<li><a href="https://www.atlassian.com/git/tutorials">Atlassian Tutorials</a></li>
					<li><a href="https://stackoverflow.com/">Stack Overflow</a></li>
				</ul>
			</section>

			<section id="editing-0"><div class="header-wrapper"><h3 id="x5-2-editing"><bdi class="secno">5.2 </bdi>Editing</h3><a class="self-link" href="#editing-0" aria-label="Permalink for Section 5.2"></a></div>
				

				<ul>
					<li><a href="https://respec.org/docs/">ReSpec Documentation</a></li>
					<li><a href="https://www.specref.org/">SpecRef Database</a></li>
					<li><a href="https://respec.org/xref/">Cross-reference Database</a></li>
					<li><a href="https://w3c.github.io/manual-of-style/">W3C Manual of Style</a></li>
					<li><a href="https://www.chicagomanualofstyle.org/home.html">Chicago Manual of Style</a></li>
				</ul>
			</section>
		</section>
	

<section id="references" class="appendix"><div class="header-wrapper"><h2 id="a-references"><bdi class="secno">A. </bdi>References</h2><a class="self-link" href="#references" aria-label="Permalink for Appendix A."></a></div><section id="informative-references"><div class="header-wrapper"><h3 id="a-1-informative-references"><bdi class="secno">A.1 </bdi>Informative references</h3><a class="self-link" href="#informative-references" aria-label="Permalink for Appendix A.1"></a></div>
    
    <dl class="bibliography"><dt id="bib-infra">[infra]</dt><dd>
      <a href="https://infra.spec.whatwg.org/"><cite>Infra Standard</cite></a>. Anne van Kesteren; Domenic Denicola.  WHATWG. Living Standard. URL: <a href="https://infra.spec.whatwg.org/">https://infra.spec.whatwg.org/</a>
    </dd><dt id="bib-rfc2119">[rfc2119]</dt><dd>
      <a href="https://www.rfc-editor.org/rfc/rfc2119"><cite>Key words for use in RFCs to Indicate Requirement Levels</cite></a>. S. Bradner.  IETF. March 1997. Best Current Practice. URL: <a href="https://www.rfc-editor.org/rfc/rfc2119">https://www.rfc-editor.org/rfc/rfc2119</a>
    </dd><dt id="bib-url">[url]</dt><dd>
      <a href="https://url.spec.whatwg.org/"><cite>URL Standard</cite></a>. Anne van Kesteren.  WHATWG. Living Standard. URL: <a href="https://url.spec.whatwg.org/">https://url.spec.whatwg.org/</a>
    </dd></dl>
  </section></section><p role="navigation" id="back-to-top">
    <a href="#title"><abbr title="Back to Top">↑</abbr></a>
  </p><script id="respec-dfn-panel">(() => {
// @ts-check
if (document.respec) {
  document.respec.ready.then(setupPanel);
} else {
  setupPanel();
}

function setupPanel() {
  const listener = panelListener();
  document.body.addEventListener("keydown", listener);
  document.body.addEventListener("click", listener);
}

function panelListener() {
  /** @type {HTMLElement} */
  let panel = null;
  return event => {
    const { target, type } = event;

    if (!(target instanceof HTMLElement)) return;

    // For keys, we only care about Enter key to activate the panel
    // otherwise it's activated via a click.
    if (type === "keydown" && event.key !== "Enter") return;

    const action = deriveAction(event);

    switch (action) {
      case "show": {
        hidePanel(panel);
        /** @type {HTMLElement} */
        const dfn = target.closest("dfn, .index-term");
        panel = document.getElementById(`dfn-panel-for-${dfn.id}`);
        const coords = deriveCoordinates(event);
        displayPanel(dfn, panel, coords);
        break;
      }
      case "dock": {
        panel.style.left = null;
        panel.style.top = null;
        panel.classList.add("docked");
        break;
      }
      case "hide": {
        hidePanel(panel);
        panel = null;
        break;
      }
    }
  };
}

/**
 * @param {MouseEvent|KeyboardEvent} event
 */
function deriveCoordinates(event) {
  const target = /** @type HTMLElement */ (event.target);

  // We prevent synthetic AT clicks from putting
  // the dialog in a weird place. The AT events sometimes
  // lack coordinates, so they have clientX/Y = 0
  const rect = target.getBoundingClientRect();
  if (
    event instanceof MouseEvent &&
    event.clientX >= rect.left &&
    event.clientY >= rect.top
  ) {
    // The event probably happened inside the bounding rect...
    return { x: event.clientX, y: event.clientY };
  }

  // Offset to the middle of the element
  const x = rect.x + rect.width / 2;
  // Placed at the bottom of the element
  const y = rect.y + rect.height;
  return { x, y };
}

/**
 * @param {Event} event
 */
function deriveAction(event) {
  const target = /** @type {HTMLElement} */ (event.target);
  const hitALink = !!target.closest("a");
  if (target.closest("dfn:not([data-cite]), .index-term")) {
    return hitALink ? "none" : "show";
  }
  if (target.closest(".dfn-panel")) {
    if (hitALink) {
      return target.classList.contains("self-link") ? "hide" : "dock";
    }
    const panel = target.closest(".dfn-panel");
    return panel.classList.contains("docked") ? "hide" : "none";
  }
  if (document.querySelector(".dfn-panel:not([hidden])")) {
    return "hide";
  }
  return "none";
}

/**
 * @param {HTMLElement} dfn
 * @param {HTMLElement} panel
 * @param {{ x: number, y: number }} clickPosition
 */
function displayPanel(dfn, panel, { x, y }) {
  panel.hidden = false;
  // distance (px) between edge of panel and the pointing triangle (caret)
  const MARGIN = 20;

  const dfnRects = dfn.getClientRects();
  // Find the `top` offset when the `dfn` can be spread across multiple lines
  let closestTop = 0;
  let minDiff = Infinity;
  for (const rect of dfnRects) {
    const { top, bottom } = rect;
    const diffFromClickY = Math.abs((top + bottom) / 2 - y);
    if (diffFromClickY < minDiff) {
      minDiff = diffFromClickY;
      closestTop = top;
    }
  }

  const top = window.scrollY + closestTop + dfnRects[0].height;
  const left = x - MARGIN;
  panel.style.left = `${left}px`;
  panel.style.top = `${top}px`;

  // Find if the panel is flowing out of the window
  const panelRect = panel.getBoundingClientRect();
  const SCREEN_WIDTH = Math.min(window.innerWidth, window.screen.width);
  if (panelRect.right > SCREEN_WIDTH) {
    const newLeft = Math.max(MARGIN, x + MARGIN - panelRect.width);
    const newCaretOffset = left - newLeft;
    panel.style.left = `${newLeft}px`;
    /** @type {HTMLElement} */
    const caret = panel.querySelector(".caret");
    caret.style.left = `${newCaretOffset}px`;
  }

  // As it's a dialog, we trap focus.
  // TODO: when <dialog> becomes a implemented, we should really
  // use that.
  trapFocus(panel, dfn);
}

/**
 * @param {HTMLElement} panel
 * @param {HTMLElement} dfn
 * @returns
 */
function trapFocus(panel, dfn) {
  /** @type NodeListOf<HTMLAnchorElement> elements */
  const anchors = panel.querySelectorAll("a[href]");
  // No need to trap focus
  if (!anchors.length) return;

  // Move focus to first anchor element
  const first = anchors.item(0);
  first.focus();

  const trapListener = createTrapListener(anchors, panel, dfn);
  panel.addEventListener("keydown", trapListener);

  // Hiding the panel releases the trap
  const mo = new MutationObserver(records => {
    const [record] = records;
    const target = /** @type HTMLElement */ (record.target);
    if (target.hidden) {
      panel.removeEventListener("keydown", trapListener);
      mo.disconnect();
    }
  });
  mo.observe(panel, { attributes: true, attributeFilter: ["hidden"] });
}

/**
 *
 * @param {NodeListOf<HTMLAnchorElement>} anchors
 * @param {HTMLElement} panel
 * @param {HTMLElement} dfn
 * @returns
 */
function createTrapListener(anchors, panel, dfn) {
  const lastIndex = anchors.length - 1;
  let currentIndex = 0;
  return event => {
    switch (event.key) {
      // Hitting "Tab" traps us in a nice loop around elements.
      case "Tab": {
        event.preventDefault();
        currentIndex += event.shiftKey ? -1 : +1;
        if (currentIndex < 0) {
          currentIndex = lastIndex;
        } else if (currentIndex > lastIndex) {
          currentIndex = 0;
        }
        anchors.item(currentIndex).focus();
        break;
      }

      // Hitting "Enter" on an anchor releases the trap.
      case "Enter":
        hidePanel(panel);
        break;

      // Hitting "Escape" returns focus to dfn.
      case "Escape":
        hidePanel(panel);
        dfn.focus();
        return;
    }
  };
}

/** @param {HTMLElement} panel */
function hidePanel(panel) {
  if (!panel) return;
  panel.hidden = true;
  panel.classList.remove("docked");
}
})()</script><script src="https://www.w3.org/scripts/TR/2021/fixup.js"></script></body></html>